(function(a,b){var c=[63,6,91,79,102,109,125,7,127,111],d="sevenSeg-svg",e="sevenSeg-segOn";b("<style type='text/css'>."+d+"{fill: #320000; overflow: hidden; stroke-width: 0; height: 100%; width: 100%; background-color: Black}."+e+"{fill: Red}</style>").prependTo("head"),b.widget("bw.sevenSegDigit",{options:{value:null,pattern:null,colorOn:null,colorOff:null,colorBackground:null,slant:0,decimalPoint:!0},_create:function(){this.jqSvgElement=b("<svg/>",{class:d,viewBox:"0 0 57 80",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",focusable:!1}).css({fill:this.options.colorOff,"background-color":this.options.colorBackground}),b("<defs/>").append(b("<polyline/>",{id:"h-seg",points:"11 0, 37 0, 42 5, 37 10, 11 10, 6 5"})).append(b("<polyline/>",{id:"v-seg",points:"0 11, 5 6, 10 11, 10 34, 5 39, 0 39"})).appendTo(this.jqSvgElement),this.jqSegments=b("<g/>",{class:this.widgetName+"-segGroup"}).append(b("<use/>",{"xlink:href":"#h-seg",x:"0",y:"0"})).append(b("<use/>",{"xlink:href":"#v-seg",x:"-48",y:"0",transform:"scale(-1,1)"})).append(b("<use/>",{"xlink:href":"#v-seg",x:"-48",y:"-80",transform:"scale(-1,-1)"})).append(b("<use/>",{"xlink:href":"#h-seg",x:"0",y:"70"})).append(b("<use/>",{"xlink:href":"#v-seg",x:"0",y:"-80",transform:"scale(1,-1)"})).append(b("<use/>",{"xlink:href":"#v-seg",x:"0",y:"0"})).append(b("<use/>",{"xlink:href":"#h-seg",x:"0",y:"35"})).appendTo(this.jqSvgElement),this.options.slant&&this.jqSegments.attr("transform","skewX("+-this.options.slant+")"),this.options.decimalPoint&&b("<circle/>",{cx:"52",cy:"75",r:"5"}).appendTo(this.jqSvgElement),this.jqSvgElement.appendTo(this.element),this.element.html(this.element.html()),this.jqSvgElement=this.element.find("svg"),this.jqSegments=this.jqSvgElement.find("."+this.widgetName+"-segGroup"),this.options.value&&this.displayValue(this.options.value),this.options.pattern&&this.displayPattern(this.options.pattern)},_destroy:function(){this.jqSvgElement.remove()},_setOption:function(f,g){this.options[f]=g;"value"===f?this.displayValue(g):"pattern"===f?this.displayPattern(g):void 0},_convert7toB:function(f){return 0|(f&64)>>6|(f&32)>>4|(f&16)>>0|(f&8)<<2|(f&4)<<4|(f&2)<<2|(f&1)<<2},_convertBto7:function(f){return(f&64)>>4|(f&32)>>2|(f&16)>>0|(f&8)>>2|(f&4)>>2|(f&2)<<4|(f&1)<<6},displayValue:function(f,g){var h=this;if(!(f>=c.length)){h.options.value=f;var i=h._getSegments(f);return h.jqSegments.children().each(function(j,k){h._setSvgElementFill(b(k),i&1<<j)}),h._setSvgElementFill(h.jqSvgElement.find("circle"),g),h._convert7toB(i)}},displayPattern:function(f){var g=this;g.options.pattern=f;var h=g._convertBto7(f);g.jqSegments.children().each(function(i,j){g._setSvgElementFill(b(j),h&1<<i)}),g._setSvgElementFill(g.jqSvgElement.find("circle"),0)},_getSegments:function(f){return"-"===f?64:c[f]},_setSvgElementFill:function(f,g){f.attr("class",g&&e),f.css("fill",g&&this.options.colorOn||"")}}),b.widget("bw.sevenSeg",{options:{value:null,pattern:null,digits:1,allowInput:!1,step:1,decimalPlaces:-1},_create:function(){this.aJqDigits=[];for(var f=this.options.digits&&100/this.options.digits+"%",g=0;g<this.options.digits;++g)this.aJqDigits[g]=b("<div/>",{style:"display: inline-block; height: 100%;"}).css("width",f).sevenSegDigit(this.options).appendTo(this.element);this.aJqDigits.reverse(),this.options.value&&this._displayValue(this.options.value),this.options.pattern&&this._displayPattern(this.options.pattern)},_destroy:function(){b.each(this.aJqDigits,function(f,g){g.sevenSegDigit("destroy"),g.remove()})},_bindMouseWheel:function(){var f=this,g="onwheel"in document?"wheel":"mousewheel";if(f._off(f.element,g),!!f.options.allowInput){var h={};h[g]=function(i){var j=f.options.step,k=i.originalEvent.wheelDelta||-i.originalEvent.deltaY;0>k&&(j=-j),f.option("value",parseFloat(f.options.value,10)+j),i.preventDefault()},f._on(h)}},_setOption:function(f,g){this.options[f]=g;"value"===f?this._displayValue(g):"pattern"===f?this._displayPattern(g):void 0},_displayValue:function(f){var g=this,h=g._createValueString(f),i=h.indexOf("."),j=h.length-1;b.each(g.aJqDigits,function(k,l){var m=0<=i&&j===i;m&&--j;var n=h[j];l.sevenSegDigit("displayValue",n,m),--j}),g._trigger("change",null,f)},_displayPattern:function(f){var g=this,h=g.options.digits;b.each(g.aJqDigits,function(i,j){var k=255&f;f>>=8,j.sevenSegDigit("displayPattern",k),--h})},_createValueString:function(f){if(!f)return"";if(0>this.options.decimalPlaces)return f.toString();var g=parseFloat(f,10);return g.toFixed(this.options.decimalPlaces)}}),a.ko&&ko.bindingHandlers&&(ko.bindingHandlers.sevenSeg={init:function(f,g){var k=g();b(f).sevenSeg(ko.toJS(k)),ko.isWriteableObservable(k.value)&&b(f).on("sevensegchange",function(l,m){k.value(m)})},update:function(f,g){b(f).sevenSeg(ko.toJS(g()))}})})(this,jQuery);